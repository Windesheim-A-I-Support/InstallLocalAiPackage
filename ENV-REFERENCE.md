# Complete .env Reference for local-ai-packaged

## Variables Generated by generate_env_secrets.sh

These are **automatically generated** by running `./generate_env_secrets.sh`:

```bash
# n8n
N8N_ENCRYPTION_KEY=<generated-hex-64>
N8N_USER_MANAGEMENT_JWT_SECRET=<generated-hex-64>

# PostgreSQL
POSTGRES_PASSWORD=<generated-urlsafe-32>

# Supabase
JWT_SECRET=<generated-urlsafe-48>
DASHBOARD_PASSWORD=<generated-urlsafe-20>
POOLER_TENANT_ID=<generated-number-4-digits>
SECRET_KEY_BASE=<generated-urlsafe-32>
VAULT_ENC_KEY=<generated-hex-64>

# Neo4j
NEO4J_AUTH=neo4j/<generated-urlsafe-16>

# Clickhouse (for Langfuse)
CLICKHOUSE_PASSWORD=<generated-urlsafe-32>

# MinIO
MINIO_ROOT_PASSWORD=<generated-urlsafe-32>

# Langfuse
LANGFUSE_SALT=<generated-urlsafe-32>
NEXTAUTH_SECRET=<generated-urlsafe-32>
ENCRYPTION_KEY=<generated-hex-64>

# Redis
REDIS_PASSWORD=<generated-urlsafe-32>

# SearXNG
SEARXNG_SECRET=<generated-urlsafe-32>

# Pipelines
PIPELINES_API_KEY=0p3n-w3bu!
```

## Variables MISSING from generate_env_secrets.sh

These need to be added manually to .env or the script needs updating:

```bash
# Flowise (MISSING - causes warnings)
FLOWISE_USERNAME=admin
FLOWISE_PASSWORD=<generate-or-set>

# Supabase PG Meta (MISSING - causes warnings)
PG_META_CRYPTO_KEY=<generate-urlsafe-32>

# Docker
DOCKER_SOCKET_LOCATION=/var/run/docker.sock

# PostgreSQL Version (optional but recommended)
POSTGRES_VERSION=15
```

## Variables That Should Be in .env.example

Check if these are in your `.env.example` from the repo:

```bash
# Basic Config
ENABLE_SIGNUP=true
DEFAULT_MODELS=llama3,mistral

# Ollama
OLLAMA_ORIGINS="*"

# Database connection strings (auto-built from POSTGRES_PASSWORD)
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@db:5432/postgres

# n8n Database
DB_TYPE=postgresdb
DB_POSTGRESDB_DATABASE=postgres
DB_POSTGRESDB_HOST=db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_USER=postgres
DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}

# Flowise Database
FLOWISE_DATABASE_TYPE=postgres
FLOWISE_DATABASE_HOST=db
FLOWISE_DATABASE_PORT=5432
FLOWISE_DATABASE_USER=postgres
FLOWISE_DATABASE_PASSWORD=${POSTGRES_PASSWORD}
FLOWISE_DATABASE_NAME=postgres
```

## Updated generate_env_secrets.sh

Add these lines to the script:

```bash
# Add these after line 34:
FLOWISE_PASSWORD=$(python3 -c "import secrets; print(secrets.token_urlsafe(20))")
PG_META_CRYPTO_KEY=$(python3 -c "import secrets; print(secrets.token_urlsafe(32))")

# Add these after line 53:
sed -i "s|^FLOWISE_PASSWORD=.*|FLOWISE_PASSWORD=${FLOWISE_PASSWORD}|" .env
sed -i "s|^PG_META_CRYPTO_KEY=.*|PG_META_CRYPTO_KEY=${PG_META_CRYPTO_KEY}|" .env

# Add if not present:
grep -q "^FLOWISE_USERNAME=" .env || echo "FLOWISE_USERNAME=admin" >> .env
grep -q "^DOCKER_SOCKET_LOCATION=" .env || echo "DOCKER_SOCKET_LOCATION=/var/run/docker.sock" >> .env
grep -q "^POSTGRES_VERSION=" .env || echo "POSTGRES_VERSION=15" >> .env
```

## Complete Minimal .env Template

Here's what your .env should look like **after** running generate_env_secrets.sh:

```bash
# ==========================================
# GENERATED SECRETS (from generate_env_secrets.sh)
# ==========================================
N8N_ENCRYPTION_KEY=<auto-generated>
N8N_USER_MANAGEMENT_JWT_SECRET=<auto-generated>
POSTGRES_PASSWORD=<auto-generated>
JWT_SECRET=<auto-generated>
NEO4J_AUTH=neo4j/<auto-generated>
CLICKHOUSE_PASSWORD=<auto-generated>
MINIO_ROOT_PASSWORD=<auto-generated>
LANGFUSE_SALT=<auto-generated>
NEXTAUTH_SECRET=<auto-generated>
ENCRYPTION_KEY=<auto-generated>
DASHBOARD_PASSWORD=<auto-generated>
POOLER_TENANT_ID=<auto-generated>
SECRET_KEY_BASE=<auto-generated>
VAULT_ENC_KEY=<auto-generated>
FLOWISE_PASSWORD=<auto-generated>
PG_META_CRYPTO_KEY=<auto-generated>
REDIS_PASSWORD=<auto-generated>
SEARXNG_SECRET=<auto-generated>

# ==========================================
# STATIC CONFIG
# ==========================================
FLOWISE_USERNAME=admin
DOCKER_SOCKET_LOCATION=/var/run/docker.sock
POSTGRES_VERSION=15
PIPELINES_API_KEY=0p3n-w3bu!

# ==========================================
# DATABASE CONNECTIONS
# ==========================================
DATABASE_URL=postgresql://postgres:${POSTGRES_PASSWORD}@db:5432/postgres

# n8n Database
DB_TYPE=postgresdb
DB_POSTGRESDB_DATABASE=postgres
DB_POSTGRESDB_HOST=db
DB_POSTGRESDB_PORT=5432
DB_POSTGRESDB_USER=postgres
DB_POSTGRESDB_PASSWORD=${POSTGRES_PASSWORD}

# Flowise Database
FLOWISE_DATABASE_TYPE=postgres
FLOWISE_DATABASE_HOST=db
FLOWISE_DATABASE_PORT=5432
FLOWISE_DATABASE_USER=postgres
FLOWISE_DATABASE_PASSWORD=${POSTGRES_PASSWORD}
FLOWISE_DATABASE_NAME=postgres

# ==========================================
# OPTIONAL CONFIG
# ==========================================
ENABLE_SIGNUP=true
DEFAULT_MODELS=llama3,mistral
OLLAMA_ORIGINS="*"
```

## Quick Fix for Your Current Deployment

If you've already run `generate_env_secrets.sh`, just add these lines to your .env:

```bash
# Add to your existing .env file
echo "FLOWISE_USERNAME=admin" >> .env
echo "FLOWISE_PASSWORD=$(python3 -c 'import secrets; print(secrets.token_urlsafe(20))')" >> .env
echo "PG_META_CRYPTO_KEY=$(python3 -c 'import secrets; print(secrets.token_urlsafe(32))')" >> .env
echo "DOCKER_SOCKET_LOCATION=/var/run/docker.sock" >> .env
echo "POSTGRES_VERSION=15" >> .env
```
